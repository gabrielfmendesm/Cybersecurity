:root{
  --bg: #0e1116;
  --panel: #151a21;
  --text: #e6edf3;
  --muted: #9aa7b5;
  --accent: #1de982; /* bright green */
  --accent-weak: rgba(29,233,130,0.2);
  --ok: #f2c94c;
  --bad: #ff4d4f;
  --hair: rgba(255,255,255,0.08);
  --shimmer: rgba(255,255,255,0.08);
}

html.light{
  --bg: #ffffff;
  --panel: #f4f6f8;
  --text: #0b1220;
  --muted: #586274;
  --accent: #ff7a00; /* bright orange */
  --accent-weak: rgba(255,122,0,0.15);
  /* medium/low colors identical to dark theme */
  --ok: #f2c94c;
  --bad: #ff4d4f;
  --hair: rgba(0,0,0,0.08);
  --shimmer: rgba(0,0,0,0.06);
}

*{ box-sizing:border-box; }
body{
  width: 420px;
  margin:0; padding:0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding: 16px 16px; border-bottom:1px solid var(--hair);
  background: var(--panel);
  backdrop-filter: blur(8px);
}
.title{ 
  font-weight:700; 
  font-size: 16px;
  letter-spacing: -0.02em; 
  line-height: 1.3;
}

/* (old toggle switch removed; using icon button) */
/* Icon theme button */
.icon-btn{ 
  display:inline-flex; 
  align-items:center; 
  justify-content:center; 
  width:36px; 
  height:36px; 
  border-radius:10px; 
  border:1px solid var(--hair); 
  background:rgba(255,255,255,0.02); 
  color: var(--text); 
  cursor:pointer; 
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}
.icon-btn:hover {
  background:rgba(255,255,255,0.06);
  border-color: var(--accent-weak);
  transform: translateY(-1px);
}
.icon-btn:active {
  transform: translateY(0);
}
.icon{ 
  display:inline-flex; 
  transition: transform 0.2s ease;
}
.icon-btn:hover .icon {
  transform: scale(1.1);
}
.icon.sun{ display:none; }
html.light .icon.moon{ display:none; }
html.light .icon.sun{ display:inline-flex; }

main{ padding: 16px; display:flex; flex-direction:column; gap:16px; }
.block{ 
  background: var(--panel); 
  padding:16px; 
  border-radius:14px; 
  border:1px solid var(--hair);
  position: relative;
  overflow: hidden;
  transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}
.block:hover {
  border-color: rgba(255,255,255,0.12);
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}
.block h2{ 
  margin:0 0 12px; 
  font-size:13px; 
  color: var(--muted); 
  font-weight:700; 
  letter-spacing:0.3px; 
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Score bar */
.score-head{ 
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  margin-bottom:12px; 
}
.score-head span{ 
  color: var(--muted); 
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.3px;
  text-transform: uppercase;
}
.score-head strong{ 
  font-size:24px; 
  font-weight: 800;
  color: var(--text);
  font-variant-numeric: tabular-nums;
}
.score-bar{ 
  position:relative; 
  height:12px; 
  background: rgba(255,255,255,0.08); 
  border-radius:6px; 
  overflow:hidden; 
  border:1px solid rgba(255,255,255,0.06);
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}
.score-fill{ 
  position:absolute; 
  left:0; 
  top:0; 
  bottom:0; 
  width:0%; 
  background: linear-gradient(90deg, var(--accent), var(--accent));
  transition: width .4s cubic-bezier(0.4, 0, 0.2, 1); 
  border-radius:5px;
}
.score-bar.ok .score-fill{ background: linear-gradient(90deg, var(--ok), #f2d94c); }
.score-bar.bad .score-fill{ background: linear-gradient(90deg, var(--bad), #ff6b6d); }

/* Ensure consistent colors: only high score follows theme accent.
   ok/bad colors are identical across light/dark via CSS variables above. */

/* Loading and animation states */
@keyframes shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

.loading {
  background: linear-gradient(90deg, transparent, var(--shimmer), transparent);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite;
}



.list{ 
  list-style:none; 
  margin:0; 
  padding:0; 
  display:flex; 
  flex-direction:column; 
  gap:6px; 
}
.list li{ 
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  gap:12px; 
  background:rgba(255,255,255,0.02); 
  border:1px solid var(--hair); 
  padding:10px 12px; 
  border-radius:10px; 
  transition: all 0.2s ease;
  position: relative;
}
.list li:hover {
  background:rgba(255,255,255,0.06);
  border-color: var(--accent-weak);
}
.list .host{ 
  color: var(--text); 
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; 
  font-size:12px; 
  overflow:hidden; 
  white-space:nowrap; 
  text-overflow:ellipsis; 
  font-weight: 500;
}
.list .count{ color: var(--muted); }
.list .badge{ 
  padding:4px 10px; 
  border-radius:12px; 
  background: var(--accent-weak); 
  color: var(--accent); 
  font-weight:700; 
  font-size:11px; 
  letter-spacing: 0.3px;
  text-transform: uppercase;
  min-width: 32px;
  text-align: center;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.list .badge.ok{ background: var(--accent-weak); color: var(--accent); }
.list .badge.warn{ background: rgba(242,201,76,.2); color: var(--ok); }
.list .badge.error{ background: rgba(255,77,79,.2); color: var(--bad); }
.list .dot{ 
  width:6px; 
  height:6px; 
  border-radius:50%; 
  background: var(--accent); 
  opacity:.9; 
  margin-right:8px; 
  flex-shrink: 0;
}
.list .left{ display:flex; align-items:center; min-width:0; flex: 1; }
.list .right{ display:flex; align-items:center; gap:8px; flex-shrink: 0; }
.list li.empty{ 
  justify-content:center; 
  color: var(--muted); 
  font-size:13px; 
  font-style: italic;
  padding: 20px;
  background: transparent;
  border-style: dashed;
}
.scroll{ 
  max-height: 180px; 
  overflow:auto; 
  scrollbar-width: thin;
  scrollbar-color: var(--hair) transparent;
}
.scroll::-webkit-scrollbar {
  width: 6px;
}
.scroll::-webkit-scrollbar-track {
  background: transparent;
}
.scroll::-webkit-scrollbar-thumb {
  background: var(--hair);
  border-radius: 3px;
}
.scroll::-webkit-scrollbar-thumb:hover {
  background: var(--muted);
}

.grid{ 
  display:grid; 
  grid-template-columns: repeat(3, 1fr); 
  gap:10px; 
  align-items:stretch; 
}
.grid > * > .kpi{ height:100%; }
.kpi{ 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  justify-content:center; 
  background:rgba(255,255,255,0.04); 
  border:1px solid var(--hair); 
  padding:14px 10px; 
  border-radius:12px; 
  min-height: 72px;
  transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
  position: relative;
  overflow: hidden;
  cursor: default;
}
.kpi:hover {
  background:rgba(255,255,255,0.06);
  border-color: var(--accent-weak);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.kpi::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent), transparent);
  opacity: 0.6;
}
.kpi span{ 
  font-size:20px; 
  font-weight:800; 
  color: var(--accent); 
  line-height:1.1; 
  word-break: break-word; 
  font-variant-numeric: tabular-nums;
  margin-bottom: 4px;
}
.kpi small{ 
  color: var(--muted); 
  text-align: center;
  line-height: 1.3;
  font-size: 12px;
  font-weight: 500;
}


.kv{ 
  display:flex; 
  justify-content:space-between; 
  align-items:baseline; 
  gap:10px; 
  padding:4px 0; 
  border-bottom: 1px solid rgba(255,255,255,0.03);
  margin-bottom: 2px;
  position: relative;
  z-index: 1;
}
.kv:last-child {
  border-bottom: none;
  margin-bottom: 0;
}
.kv span{ 
  color: var(--muted); 
  white-space:nowrap; 
  font-size: 12px;
  font-weight: 500;
}
.kv strong{ 
  font-weight:700; 
  white-space:nowrap; 
  overflow:hidden; 
  text-overflow:ellipsis; 
  max-width:55%; 
  font-variant-numeric: tabular-nums;
  color: var(--text);
}

/* Storage Section Styles */
.storage-stack {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.storage-card {
  display: flex;
  flex-direction: column;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--hair);
  border-radius: 12px;
  padding: 16px;
  transition: all 0.2s ease;
  position: relative;
  overflow: visible;
  min-height: 80px;
}

.storage-card:hover {
  background: rgba(255,255,255,0.06);
  border-color: var(--accent-weak);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.storage-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent), transparent);
  opacity: 0.4;
  border-radius: 12px 12px 0 0;
}

.storage-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.storage-header h3 {
  margin: 0;
  font-size: 14px;
  color: var(--accent);
  font-weight: 700;
  letter-spacing: 0.2px;
  text-transform: uppercase;
  line-height: 1.3;
  word-wrap: break-word;
  hyphens: auto;
}

.storage-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  background: var(--accent-weak);
  color: var(--accent);
  flex-shrink: 0;
}

.storage-content {
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: 16px;
  flex: 1;
}

.storage-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  flex: 1;
  min-width: 0;
}

.stat-value {
  font-size: 20px;
  font-weight: 800;
  color: var(--accent);
  line-height: 1.1;
  word-break: break-word;
  font-variant-numeric: tabular-nums;
  margin-bottom: 4px;
  display: block;
}

.stat-label {
  color: var(--muted);
  text-align: center;
  line-height: 1.3;
  font-size: 12px;
  font-weight: 500;
  word-wrap: break-word;
  hyphens: auto;
}

/* Special styling for single stat cards (IndexedDB) */
.storage-card .storage-stat:only-child {
  max-width: 60%;
}

/* Responsive adjustments for extension width (420px) */
@media (max-width: 450px) {
  .storage-card {
    padding: 14px;
    min-height: 75px;
  }
  
  .storage-header h3 {
    font-size: 13px;
  }
  
  .storage-icon {
    width: 28px;
    height: 28px;
  }
  
  .storage-icon svg {
    width: 14px;
    height: 14px;
  }
  
  .storage-content {
    gap: 12px;
  }
  
  .stat-value {
    font-size: 18px;
  }
  
  .stat-label {
    font-size: 11px;
  }
}
